(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{282:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(285);t.colors=["white","black"],t.invRanks=[8,7,6,5,4,3,2,1],t.allKeys=(o=Array.prototype).concat.apply(o,n.files.map((function(e){return n.ranks.map((function(t){return e+t}))}))),t.pos2key=function(e){return t.allKeys[8*e[0]+e[1]-9]},t.key2pos=function(e){return[e.charCodeAt(0)-96,e.charCodeAt(1)-48]},t.memo=function(e){var t,r=function(){return void 0===t&&(t=e()),t};return r.clear=function(){t=void 0},r},t.timer=function(){var e;return{start:function(){e=Date.now()},cancel:function(){e=void 0},stop:function(){if(!e)return 0;var t=Date.now()-e;return e=void 0,t}}},t.opposite=function(e){return"white"===e?"black":"white"},t.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)},t.distanceSq=function(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)},t.samePiece=function(e,t){return e.role===t.role&&e.color===t.color},t.computeIsTrident=function(){return window.navigator.userAgent.indexOf("Trident/")>-1};var o,i=function(e,t,r,n){return[(t?e[0]-1:8-e[0])*r,(t?8-e[1]:e[1]-1)*n]};t.posToTranslateAbs=function(e){var t=e.width/8,r=e.height/8;return function(e,n){return i(e,n,t,r)}},t.posToTranslateRel=function(e,t){return i(e,t,12.5,12.5)},t.translateAbs=function(e,t){e.style.transform="translate("+t[0]+"px,"+t[1]+"px)"},t.translateRel=function(e,t){e.style.left=t[0]+"%",e.style.top=t[1]+"%"},t.setVisible=function(e,t){e.style.visibility=t?"visible":"hidden"},t.eventPosition=function(e){return e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},t.isRightButton=function(e){return 2===e.buttons||2===e.button},t.createEl=function(e,t){var r=document.createElement(e);return t&&(r.className=t),r},t.raf=(window.requestAnimationFrame||window.setTimeout).bind(window)},284:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(282),o=r(302);function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e&&setTimeout((function(){return e.apply(void 0,t)}),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,i(e.premovable.events.unset))}function c(e){var t=e.predroppable;t.current&&(t.current=void 0,i(t.events.unset))}function s(e,t,r){if(t===r||!e.pieces[t])return!1;var o=e.pieces[r]&&e.pieces[r].color!==e.pieces[t].color?e.pieces[r]:void 0;return r==e.selected&&p(e),i(e.events.move,t,r,o),function(e,t,r){if(!e.autoCastle)return!1;var o=e.pieces[t];if("king"!==o.role)return!1;var i=n.key2pos(t);if(5!==i[0])return!1;if(1!==i[1]&&8!==i[1])return!1;var a,c,s,u=n.key2pos(r);if(7===u[0]||8===u[0])a=n.pos2key([8,i[1]]),c=n.pos2key([6,i[1]]),s=n.pos2key([7,i[1]]);else{if(3!==u[0]&&1!==u[0])return!1;a=n.pos2key([1,i[1]]),c=n.pos2key([4,i[1]]),s=n.pos2key([3,i[1]])}var l=e.pieces[a];return"rook"===l.role&&(delete e.pieces[t],delete e.pieces[a],e.pieces[s]=o,e.pieces[c]=l,!0)}(e,t,r)||(e.pieces[r]=e.pieces[t],delete e.pieces[t]),e.lastMove=[t,r],e.check=void 0,i(e.events.change),o||!0}function u(e,t,r,o){if(e.pieces[r]){if(!o)return!1;delete e.pieces[r]}return i(e.events.dropNewPiece,t,r),e.pieces[r]=t,e.lastMove=[r],e.check=void 0,i(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function l(e,t,r){var o=s(e,t,r);return o&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),o}function d(e,t,r){if(h(e,t,r)){var a=l(e,t,r);if(a){var s=e.hold.stop();p(e);var u={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:s};return!0!==a&&(u.captured=a),i(e.movable.events.after,t,r,u),!0}}else!function(e,t,r){return t!==r&&g(e,t)&&n.containsX(o.default(e.pieces,t,e.premovable.castle),r)}(e,t,r)?v(e,r)||g(e,r)?(f(e,r),e.hold.start()):p(e):(!function(e,t,r,n){c(e),e.premovable.current=[t,r],i(e.premovable.events.set,t,r,n)}(e,t,r,{ctrlKey:e.stats.ctrlKey}),p(e));return!1}function f(e,t){e.selected=t,g(e,t)?e.premovable.dests=o.default(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function p(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function v(e,t){var r=e.pieces[t];return r&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function h(e,t,r){return t!==r&&v(e,t)&&(e.movable.free||!!e.movable.dests&&n.containsX(e.movable.dests[t],r))}function g(e,t){var r=e.pieces[t];return r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}function b(e){a(e),c(e),p(e)}t.callUserFunction=i,t.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},t.reset=function(e){e.lastMove=void 0,p(e),a(e),c(e)},t.setPieces=function(e,t){for(var r in t){var n=t[r];n?e.pieces[r]=n:delete e.pieces[r]}},t.setCheck=function(e,t){if(!0===t&&(t=e.turnColor),t)for(var r in e.pieces)"king"===e.pieces[r].role&&e.pieces[r].color===t&&(e.check=r);else e.check=void 0},t.unsetPremove=a,t.unsetPredrop=c,t.baseMove=s,t.baseNewPiece=u,t.userMove=d,t.dropNewPiece=function(e,t,r,n){if(function(e,t,r){var n=e.pieces[t];return n&&r&&(t===r||!e.pieces[r])&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}(e,t,r)||n){var o=e.pieces[t];delete e.pieces[t],u(e,o,r,n),i(e.movable.events.afterNewPiece,o.role,r,{predrop:!1})}else!function(e,t,r){var n=e.pieces[t];return n&&r&&(!e.pieces[r]||e.pieces[r].color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==r[1]&&"8"!==r[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,r)?(a(e),c(e)):function(e,t,r){a(e),e.predroppable.current={role:t,key:r},i(e.predroppable.events.set,t,r)}(e,e.pieces[t].role,r);delete e.pieces[t],p(e)},t.selectSquare=function(e,t,r){e.selected?e.selected!==t||e.draggable.enabled?(e.selectable.enabled||r)&&e.selected!==t?d(e,e.selected,t)&&(e.stats.dragged=!1):e.hold.start():(p(e),e.hold.cancel()):(v(e,t)||g(e,t))&&(f(e,t),e.hold.start()),i(e.events.select,t)},t.setSelected=f,t.unselect=p,t.canMove=h,t.isDraggable=function(e,t){var r=e.pieces[t];return r&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))},t.playPremove=function(e){var t=e.premovable.current;if(!t)return!1;var r=t[0],n=t[1],o=!1;if(h(e,r,n)){var c=l(e,r,n);if(c){var s={premove:!0};!0!==c&&(s.captured=c),i(e.movable.events.after,r,n,s),o=!0}}return a(e),o},t.playPredrop=function(e,t){var r=e.predroppable.current,n=!1;return!!r&&(t(r)&&u(e,{role:r.role,color:e.movable.color},r.key)&&(i(e.movable.events.afterNewPiece,r.role,r.key,{predrop:!0}),n=!0),c(e),n)},t.cancelMove=b,t.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,b(e)},t.getKeyAtDomPos=function(e,t,r){var o=Math.ceil((e[0]-r.left)/r.width*8);t||(o=9-o);var i=Math.ceil(8-(e[1]-r.top)/r.height*8);return t||(i=9-i),o>0&&o<9&&i>0&&i<9?n.pos2key([o,i]):void 0}},285:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.files=["a","b","c","d","e","f","g","h"],t.ranks=[1,2,3,4,5,6,7,8]},286:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(282),o=r(285);t.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.read=function(e){"start"===e&&(e=t.initial);for(var r={},o=8,a=0,c=0,s=e;c<s.length;c++){var u=s[c];switch(u){case" ":return r;case"/":if(0===--o)return r;a=0;break;case"~":r[n.pos2key([a,o])].promoted=!0;break;default:var l=u.charCodeAt(0);if(l<57)a+=l-48;else{++a;var d=u.toLowerCase();r[n.pos2key([a,o])]={role:i[d],color:u===d?"black":"white"}}}}return r},t.write=function(e){var t,r;return n.invRanks.map((function(i){return o.ranks.map((function(o){return(t=e[n.pos2key([o,i])])?(r=a[t.role],"white"===t.color?r.toUpperCase():r):"1"})).join("")})).join("/").replace(/1{2,}/g,(function(e){return e.length.toString()}))}},289:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(284),o=r(286);function i(e){return"object"==typeof e}t.configure=function(e,t){if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),function e(t,r){for(var n in r)i(t[n])&&i(r[n])?e(t[n],r[n]):t[n]=r[n]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){var r="white"===e.movable.color?1:8,a="e"+r,c=e.movable.dests[a];if(!c||"king"!==e.pieces[a].role)return;e.movable.dests[a]=c.filter((function(e){return!(e==="a"+r&&-1!==c.indexOf("c"+r)||e==="h"+r&&-1!==c.indexOf("g"+r))}))}}},290:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(282);function i(e,t){var r=e(t);return t.dom.redraw(),r}function a(e,t){return{key:e,pos:o.key2pos(e),piece:t}}t.anim=function(e,t){return t.animation.enabled?function(e,t){var r=n({},t.pieces),i=e(t),u=function(e,t){var r,n,i,c,s={},u=[],l={},d=[],f=[],p={};for(i in e)p[i]=a(i,e[i]);for(var v=0,h=o.allKeys;v<h.length;v++){var g=h[v];r=t.pieces[g],n=p[g],r?n?o.samePiece(r,n.piece)||(d.push(n),f.push(a(g,r))):f.push(a(g,r)):n&&d.push(n)}return f.forEach((function(e){var t,r;t=e,r=d.filter((function(t){return o.samePiece(e.piece,t.piece)})),(n=r.sort((function(e,r){return o.distanceSq(t.pos,e.pos)-o.distanceSq(t.pos,r.pos)}))[0])&&(c=[n.pos[0]-e.pos[0],n.pos[1]-e.pos[1]],s[e.key]=c.concat(c),u.push(n.key))})),d.forEach((function(e){o.containsX(u,e.key)||t.items&&t.items(e.pos,e.key)||(l[e.key]=e.piece)})),{anims:s,fadings:l}}(r,t);if(s(u.anims)&&s(u.fadings))t.dom.redraw();else{var l=t.animation.current&&t.animation.current.start;t.animation.current={start:c.now(),frequency:1/t.animation.duration,plan:u},l||function e(t,r){var n=t.animation.current;if(void 0===n)return void(t.dom.destroyed||t.dom.redrawNow());var i=1-(r-n.start)*n.frequency;if(i<=0)t.animation.current=void 0,t.dom.redrawNow();else{var a=(l=i)<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1;for(var s in n.plan.anims){var u=n.plan.anims[s];u[2]=u[0]*a,u[3]=u[1]*a}t.dom.redrawNow(!0),o.raf((function(r){return void 0===r&&(r=c.now()),e(t,r)}))}var l}(t,c.now())}return i}(e,t):i(e,t)},t.render=i;var c=void 0!==window.performance?window.performance:Date;function s(e){for(var t in e)return!1;return!0}},291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(284),o=r(282),i=r(292),a=r(290);function c(e){o.raf((function(){var t=e.draggable.current;if(t){e.animation.current&&e.animation.current.plan.anims[t.orig]&&(e.animation.current=void 0);var r=e.pieces[t.orig];if(r&&o.samePiece(r,t.piece)){if(!t.started&&o.distanceSq(t.epos,t.rel)>=Math.pow(e.draggable.distance,2)&&(t.started=!0),t.started){if("function"==typeof t.element){var n=t.element();if(!n)return;t.element=n,t.element.cgDragging=!0,t.element.classList.add("dragging")}var i="white"===e.orientation,a=e.dom.bounds();t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]];var u=o.posToTranslateAbs(a)(t.origPos,i);u[0]+=t.pos[0]+t.dec[0],u[1]+=t.pos[1]+t.dec[1],o.translateAbs(t.element,u)}}else s(e);c(e)}}))}function s(e){var t=e.draggable.current;t&&(t.newPiece&&delete e.pieces[t.orig],e.draggable.current=void 0,n.unselect(e),u(e),e.dom.redraw())}function u(e){var t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function l(e,t,r){var n=o.key2pos(e);return t||(n[0]=9-n[0],n[1]=9-n[1]),{left:r.left+r.width*(n[0]-1)/8,top:r.top+r.height*(8-n[1])/8,width:r.width/8,height:r.height/8}}function d(e,t){for(var r=e.dom.elements.board.firstChild;r;){if(r.cgKey===t&&"PIECE"===r.tagName)return r;r=r.nextSibling}}t.start=function(e,t){if(!(void 0!==t.button&&0!==t.button||t.touches&&t.touches.length>1)){t.preventDefault();var r="white"===e.orientation,s=e.dom.bounds(),u=o.eventPosition(t),f=n.getKeyAtDomPos(u,r,s);if(f){var p=e.pieces[f],v=e.selected;v||!e.drawable.enabled||!e.drawable.eraseOnClick&&p&&p.color===e.turnColor||i.clear(e);var h=!!e.premovable.current,g=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,f)?a.anim((function(e){return n.selectSquare(e,f)}),e):n.selectSquare(e,f);var b=e.selected===f,m=d(e,f);if(p&&m&&b&&n.isDraggable(e,f)){var w=l(f,r,s);e.draggable.current={orig:f,origPos:o.key2pos(f),piece:p,rel:u,epos:u,pos:[0,0],dec:e.draggable.centerPiece?[u[0]-(w.left+w.width/2),u[1]-(w.top+w.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:m,previouslySelected:v,originTarget:t.target},m.cgDragging=!0,m.classList.add("dragging");var y=e.dom.elements.ghost;y&&(y.className="ghost "+p.color+" "+p.role,o.translateAbs(y,o.posToTranslateAbs(s)(o.key2pos(f),r)),o.setVisible(y,!0)),c(e)}else h&&n.unsetPremove(e),g&&n.unsetPredrop(e);e.dom.redraw()}}},t.dragNewPiece=function(e,t,r,n){e.pieces.a0=t,e.dom.redraw();var i=o.eventPosition(r),a="white"===e.orientation,s=e.dom.bounds(),u=l("a0",a,s),f=[(a?0:7)*u.width+s.left,(a?8:-1)*u.height+s.top];e.draggable.current={orig:"a0",origPos:o.key2pos("a0"),piece:t,rel:f,epos:i,pos:[i[0]-f[0],i[1]-f[1]],dec:[-u.width/2,-u.height/2],started:!0,element:function(){return d(e,"a0")},originTarget:r.target,newPiece:!0,force:n||!1},c(e)},t.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=o.eventPosition(t))},t.end=function(e,t){var r=e.draggable.current;if(r)if("touchend"!==t.type||!r||r.originTarget===t.target||r.newPiece){n.unsetPremove(e),n.unsetPredrop(e);var i=o.eventPosition(t)||r.epos,a=n.getKeyAtDomPos(i,"white"===e.orientation,e.dom.bounds());a&&r.started?r.newPiece?n.dropNewPiece(e,r.orig,a,r.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,r.orig,a)&&(e.stats.dragged=!0)):r.newPiece?delete e.pieces[r.orig]:e.draggable.deleteOnDropOff&&(delete e.pieces[r.orig],n.callUserFunction(e.events.change)),(!r||r.orig!==r.previouslySelected||r.orig!==a&&a)&&e.selectable.enabled||n.unselect(e),u(e),e.draggable.current=void 0,e.dom.redraw()}else e.draggable.current=void 0},t.cancel=s},292:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(284),o=r(282),i=["green","red","blue","yellow"];function a(e){o.raf((function(){var t=e.drawable.current;if(t){var r=n.getKeyAtDomPos(t.pos,"white"===e.orientation,e.dom.bounds());r!==t.mouseSq&&(t.mouseSq=r,t.dest=r!==t.orig?r:void 0,e.dom.redrawNow()),a(e)}}))}function c(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function s(e){var t=e.shiftKey&&o.isRightButton(e)?1:0,r=e.altKey?2:0;return i[t+r]}function u(e){e.onChange&&e.onChange(e.shapes)}t.start=function(e,t){if(!(t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),n.cancelMove(e);var r=o.eventPosition(t),i=n.getKeyAtDomPos(r,"white"===e.orientation,e.dom.bounds());i&&(e.drawable.current={orig:i,pos:r,brush:s(t)},a(e))}},t.processDraw=a,t.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},t.end=function(e){var t=e.drawable.current;t&&(t.mouseSq&&function(e,t){var r=function(e){return e.orig===t.orig&&e.dest===t.dest},n=e.shapes.filter(r)[0];n&&(e.shapes=e.shapes.filter((o=r,function(e){return!o(e)})));var o;n&&n.brush===t.brush||e.shapes.push(t);u(e)}(e.drawable,t),c(e))},t.cancel=c,t.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),u(e.drawable))}},293:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(282);function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function a(e,t,r){var n,o=e.orig,i=e.dest,a=e.brush,s=e.piece,u=e.modifiers;return[r,o,i,a,i&&t[i]>1,s&&c(s),u&&(n=u,""+(n.lineWidth||""))].filter((function(e){return e})).join("")}function c(e){return[e.color,e.role,e.scale].filter((function(e){return e})).join("")}function s(e){var t=u(i("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(u(i("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function u(e,t){for(var r in t)e.setAttribute(r,t[r]);return e}function l(e,t){return"white"===t?e:[9-e[0],9-e[1]]}function d(e,t){var r={color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth)};return r.key=[e.key,t.lineWidth].filter((function(e){return e})).join(""),r}function f(e,t,r){return(e.lineWidth||10)*(t?.85:1)/512*r.width}function p(e,t){return(e.opacity||1)*(t?.9:1)}function v(e,t){return[(e[0]-.5)*t.width/8,(8.5-e[1])*t.height/8]}t.createElement=i,t.renderSvg=function(e,t){var r=e.drawable,c=r.current,h=c&&c.mouseSq?c:void 0,g={};r.shapes.concat(r.autoShapes).concat(h?[h]:[]).forEach((function(e){e.dest&&(g[e.dest]=(g[e.dest]||0)+1)}));var b=r.shapes.concat(r.autoShapes).map((function(e){return{shape:e,current:!1,hash:a(e,g,!1)}}));h&&b.push({shape:h,current:!0,hash:a(h,g,!0)});var m=b.map((function(e){return e.hash})).join("");if(m!==e.drawable.prevSvgHash){e.drawable.prevSvgHash=m;var w=t.firstChild;!function(e,t,r){var n,o={};t.forEach((function(t){t.shape.dest&&(n=e.brushes[t.shape.brush],t.shape.modifiers&&(n=d(n,t.shape.modifiers)),o[n.key]=n)}));var i={},a=r.firstChild;for(;a;)i[a.getAttribute("cgKey")]=!0,a=a.nextSibling;for(var c in o)i[c]||r.appendChild(s(o[c]))}(r,b,w),function(e,t,r,a,c,s){void 0===n&&(n=o.computeIsTrident());var h=e.dom.bounds(),g={},b=[];t.forEach((function(e){g[e.hash]=!1}));var m,w=s.nextSibling;for(;w;)m=w.getAttribute("cgHash"),g.hasOwnProperty(m)?g[m]=!0:b.push(w),w=w.nextSibling;b.forEach((function(e){return c.removeChild(e)})),t.forEach((function(t){g[t.hash]||c.appendChild(function(e,t,r,a,c){var s,h=t.shape,g=t.current,b=t.hash;if(h.piece)s=function(e,t,r,n){var o=v(t,n),a=n.width/8*(r.scale||1),c=r.color[0]+("knight"===r.role?"n":r.role[0]).toUpperCase();return u(i("image"),{className:r.role+" "+r.color,x:o[0]-a/2,y:o[1]-a/2,width:a,height:a,href:e+c+".svg"})}(e.drawable.pieces.baseUrl,l(o.key2pos(h.orig),e.orientation),h.piece,c);else{var m=l(o.key2pos(h.orig),e.orientation);if(h.orig&&h.dest){var w=r[h.brush];h.modifiers&&(w=d(w,h.modifiers)),s=function(e,t,r,o,a,c){var s=function(e,t){return n?0:(t?20:10)/512*e.width}(c,a&&!o),l=v(t,c),d=v(r,c),h=d[0]-l[0],g=d[1]-l[1],b=Math.atan2(g,h),m=Math.cos(b)*s,w=Math.sin(b)*s;return u(i("line"),{stroke:e.color,"stroke-width":f(e,o,c),"stroke-linecap":"round","marker-end":n?void 0:"url(#arrowhead-"+e.key+")",opacity:p(e,o),x1:l[0],y1:l[1],x2:d[0]-m,y2:d[1]-w})}(w,m,l(o.key2pos(h.dest),e.orientation),g,a[h.dest]>1,c)}else s=function(e,t,r,n){var o=v(t,n),a=function(e){var t=e.width/512;return[3*t,4*t]}(n),c=(n.width+n.height)/32;return u(i("circle"),{stroke:e.color,"stroke-width":a[r?0:1],fill:"none",opacity:p(e,r),cx:o[0],cy:o[1],r:c-a[1]/2})}(r[h.brush],m,g,c)}return s.setAttribute("cgHash",b),s}(e,t,r,a,h))}))}(e,b,r.brushes,g,t,w)}}},297:function(e,t){e.exports={prefix:"fas",iconName:"book",icon:[448,512,[],"f02d","M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"]}},298:function(e,t){e.exports={prefix:"fas",iconName:"cogs",icon:[640,512,[],"f085","M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"]}},299:function(e,t){e.exports={prefix:"fas",iconName:"info-circle",icon:[512,512,[],"f05a","M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"]}},300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(301),o=r(289),i=r(304),a=r(305),c=r(306),s=r(307),u=r(293),l=r(282);function d(e){var t=!1;return function(){t||(t=!0,l.raf((function(){e(),t=!1})))}}t.Chessground=function(e,t){var r=i.defaults();function f(){var t=r.dom&&r.dom.unbind;e.classList.add("cg-board-wrap");var n=l.memo((function(){return e.getBoundingClientRect()})),o=r.viewOnly&&!r.drawable.visible,i=a.default(e,r,o?void 0:n()),p=function(e){s.default(r),!e&&i.svg&&u.renderSvg(r,i.svg)};r.dom={elements:i,bounds:n,redraw:d(p),redrawNow:p,unbind:t,relative:o},r.drawable.prevSvgHash="",p(!1),c.bindBoard(r),t||(r.dom.unbind=c.bindDocument(r,f))}return o.configure(r,t||{}),f(),n.start(r,f)}},301:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(284),o=r(286),i=r(289),a=r(290),c=r(291),s=r(303);t.start=function(e,t){function r(){n.toggleOrientation(e),t()}return{set:function(t){t.orientation&&t.orientation!==e.orientation&&r(),(t.fen?a.anim:a.render)((function(e){return i.configure(e,t)}),e)},state:e,getFen:function(){return o.write(e.pieces)},toggleOrientation:r,setPieces:function(t){a.anim((function(e){return n.setPieces(e,t)}),e)},selectSquare:function(t,r){t?a.anim((function(e){return n.selectSquare(e,t,r)}),e):e.selected&&(n.unselect(e),e.dom.redraw())},move:function(t,r){a.anim((function(e){return n.baseMove(e,t,r)}),e)},newPiece:function(t,r){a.anim((function(e){return n.baseNewPiece(e,t,r)}),e)},playPremove:function(){if(e.premovable.current){if(a.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop:function(t){if(e.predroppable.current){var r=n.playPredrop(e,t);return e.dom.redraw(),r}return!1},cancelPremove:function(){a.render(n.unsetPremove,e)},cancelPredrop:function(){a.render(n.unsetPredrop,e)},cancelMove:function(){a.render((function(e){n.cancelMove(e),c.cancel(e)}),e)},stop:function(){a.render((function(e){n.stop(e),c.cancel(e)}),e)},explode:function(t){s.default(e,t)},setAutoShapes:function(t){a.render((function(e){return e.drawable.autoShapes=t}),e)},setShapes:function(t){a.render((function(e){return e.drawable.shapes=t}),e)},getKeyAtDomPos:function(t){return n.getKeyAtDomPos(t,"white"===e.orientation,e.dom.bounds())},redrawAll:t,dragNewPiece:function(t,r,n){c.dragNewPiece(e,t,r,n)},destroy:function(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(282);function o(e,t){return Math.abs(e-t)}var i=function(e,t,r,n){var i=o(e,r),a=o(t,n);return 1===i&&2===a||2===i&&1===a},a=function(e,t,r,n){return o(e,r)===o(t,n)},c=function(e,t,r,n){return e===r||t===n},s=function(e,t,r,n){return a(e,t,r,n)||c(e,t,r,n)};t.default=function(e,t,r){var u,l,d=e[t],f=n.key2pos(t);switch(d.role){case"pawn":l=d.color,u=function(e,t,r,n){return o(e,r)<2&&("white"===l?n===t+1||t<=2&&n===t+2&&e===r:n===t-1||t>=7&&n===t-2&&e===r)};break;case"knight":u=i;break;case"bishop":u=a;break;case"rook":u=c;break;case"queen":u=s;break;case"king":u=function(e,t,r){return function(i,a,c,s){return o(i,c)<2&&o(a,s)<2||r&&a===s&&a===("white"===e?1:8)&&(5===i&&(3===c||7===c)||n.containsX(t,c))}}(d.color,function(e,t){var r;return Object.keys(e).filter((function(n){return(r=e[n])&&r.color===t&&"rook"===r.role})).map((function(e){return n.key2pos(e)[0]}))}(e,d.color),r)}return n.allKeys.map(n.key2pos).filter((function(e){return(f[0]!==e[0]||f[1]!==e[1])&&u(f[0],f[1],e[0],e[1])})).map(n.pos2key)}},303:function(e,t,r){"use strict";function n(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((function(){n(e,2),setTimeout((function(){return n(e,void 0)}),120)}),120)}},304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(286),o=r(282);t.defaults=function(){return{pieces:n.read(n.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(282),o=r(285),i=r(293);function a(e,t){var r,o=n.createEl("coords",t);for(var i in e)(r=n.createEl("coord")).textContent=e[i],o.appendChild(r);return o}t.default=function(e,t,r){e.innerHTML="",e.classList.add("cg-board-wrap"),n.colors.forEach((function(r){e.classList.toggle("orientation-"+r,t.orientation===r)})),e.classList.toggle("manipulable",!t.viewOnly);var c,s,u=n.createEl("div","cg-board");if(e.appendChild(u),t.drawable.visible&&r&&((c=i.createElement("svg")).appendChild(i.createElement("defs")),e.appendChild(c)),t.coordinates){var l="black"===t.orientation?" black":"";e.appendChild(a(o.ranks,"ranks"+l)),e.appendChild(a(o.files,"files"+l))}return r&&t.draggable.showGhost&&(s=n.createEl("piece","ghost"),n.setVisible(s,!1),e.appendChild(s)),{board:u,ghost:s,svg:c}}},306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(291),o=r(292),i=r(282);function a(e,t,r,n){return e.addEventListener(t,r,n),function(){return e.removeEventListener(t,r)}}function c(e,t,r){return function(n){n.shiftKey||i.isRightButton(n)?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)}}t.bindBoard=function(e){if(!e.viewOnly){var t=e.dom.elements.board,r=function(e){return function(t){e.draggable.current?n.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||i.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||n.start(e,t)}}(e);t.addEventListener("touchstart",r),t.addEventListener("mousedown",r),(e.disableContextMenu||e.drawable.enabled)&&t.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},t.bindDocument=function(e,t){var r=[];if(!e.dom.relative&&e.resizable){r.push(a(document.body,"chessground.resize",(function(){e.dom.bounds.clear(),i.raf(t)})))}if(!e.viewOnly){var s=c(e,n.move,o.move),u=c(e,n.end,o.end);["touchmove","mousemove"].forEach((function(e){return r.push(a(document,e,s))})),["touchend","mouseup"].forEach((function(e){return r.push(a(document,e,u))}));var l=function(){return e.dom.bounds.clear()};r.push(a(window,"scroll",l,{passive:!0})),r.push(a(window,"resize",l,{passive:!0}))}return function(){return r.forEach((function(e){return e()}))}}},307:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(282),o=r(282);function i(e){return"PIECE"===e.tagName}function a(e){return"SQUARE"===e.tagName}function c(e,t){for(var r in t)e.dom.elements.board.removeChild(t[r])}function s(e,t){var r=2+8*(e[1]-1)+(8-e[0]);return t&&(r=67-r),r+""}function u(e){return e.color+" "+e.role}function l(e,t,r){e[t]?e[t]+=" "+r:e[t]=r}t.default=function(e){var t,r,d,f,p,v,h,g,b,m,w,y="white"===e.orientation,k=e.dom.relative?o.posToTranslateRel:o.posToTranslateAbs(e.dom.bounds()),P=e.dom.relative?o.translateRel:o.translateAbs,M=e.dom.elements.board,C=e.pieces,O=e.animation.current,x=O?O.plan.anims:{},E=O?O.plan.fadings:{},S=e.draggable.current,j=function(e){var t,r,n={};if(e.lastMove&&e.highlight.lastMove)for(t in e.lastMove)l(n,e.lastMove[t],"last-move");e.check&&e.highlight.check&&l(n,e.check,"check");if(e.selected&&(l(n,e.selected,"selected"),e.movable.showDests)){var o=e.movable.dests&&e.movable.dests[e.selected];if(o)for(t in o)r=o[t],l(n,r,"move-dest"+(e.pieces[r]?" oc":""));var i=e.premovable.dests;if(i)for(t in i)r=i[t],l(n,r,"premove-dest"+(e.pieces[r]?" oc":""))}var a=e.premovable.current;if(a)for(t in a)l(n,a[t],"current-premove");else e.predroppable.current&&l(n,e.predroppable.current.key,"current-premove");var c=e.exploding;if(c)for(t in c.keys)l(n,c.keys[t],"exploding"+c.stage);return n}(e),A={},_={},K={},D={},N=Object.keys(C);for(d=M.firstChild;d;){if(t=d.cgKey,i(d))if(f=C[t],v=x[t],h=E[t],p=d.cgPiece,!d.cgDragging||S&&S.orig===t||(d.classList.remove("dragging"),P(d,k(n.key2pos(t),y)),d.cgDragging=!1),!h&&d.cgFading&&(d.cgFading=!1,d.classList.remove("fading")),f){if(v&&d.cgAnimating&&p===u(f))(W=n.key2pos(t))[0]+=v[2],W[1]+=v[3],d.classList.add("anim"),P(d,k(W,y));else d.cgAnimating&&(d.cgAnimating=!1,d.classList.remove("anim"),P(d,k(n.key2pos(t),y)),e.addPieceZIndex&&(d.style.zIndex=s(n.key2pos(t),y)));p!==u(f)||h&&d.cgFading?h&&p===u(h)?(d.classList.add("fading"),d.cgFading=!0):K[p]?K[p].push(d):K[p]=[d]:A[t]=!0}else K[p]?K[p].push(d):K[p]=[d];else if(a(d)){var T=d.className;j[t]===T?_[t]=!0:D[T]?D[T].push(d):D[T]=[d]}d=d.nextSibling}for(var L in j)if(!_[L]){w=(m=D[j[L]])&&m.pop();var q=k(n.key2pos(L),y);if(w)w.cgKey=L,P(w,q);else{var R=n.createEl("square",j[L]);R.cgKey=L,P(R,q),M.insertBefore(R,M.firstChild)}}for(var z in N)if(r=C[t=N[z]],v=x[t],!A[t])if(b=(g=K[u(r)])&&g.pop()){b.cgKey=t,b.cgFading&&(b.classList.remove("fading"),b.cgFading=!1);var W=n.key2pos(t);e.addPieceZIndex&&(b.style.zIndex=s(W,y)),v&&(b.cgAnimating=!0,b.classList.add("anim"),W[0]+=v[2],W[1]+=v[3]),P(b,k(W,y))}else{var B=u(r),H=n.createEl("piece",B);W=n.key2pos(t);H.cgPiece=B,H.cgKey=t,v&&(H.cgAnimating=!0,W[0]+=v[2],W[1]+=v[3]),P(H,k(W,y)),e.addPieceZIndex&&(H.style.zIndex=s(W,y)),M.appendChild(H)}for(var I in K)c(e,K[I]);for(var I in D)c(e,D[I])}},308:function(e,t,r){var n=r(74),o=r(37);e.exports=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:i,maxWait:t,trailing:a})}},309:function(e,t,r){"use strict";var n=r(0);t.a=function(e){void 0===e&&(e={});var t=Object(n.useRef)(null),r=e.onResize,o=Object(n.useRef)(void 0);o.current=r;var i=Object(n.useRef)(),a=e.ref||t,c=Object(n.useState)({width:void 0,height:void 0}),s=c[0],u=c[1],l=Object(n.useRef)({width:void 0,height:void 0});return Object(n.useEffect)((function(){i.current||(i.current=new ResizeObserver((function(e){if(Array.isArray(e)&&e.length){var t=e[0],r=Math.round(t.contentRect.width),n=Math.round(t.contentRect.height);if(l.current.width!==r||l.current.height!==n){var i={width:r,height:n};o.current?o.current(i):(l.current.width=r,l.current.height=n,u(i))}}})))}),[]),Object(n.useEffect)((function(){if("object"==typeof a&&null!==a&&a.current instanceof Element){var e=a.current;return i.current.observe(e),function(){return i.current.unobserve(e)}}}),[a]),Object(n.useMemo)((function(){return{ref:a,width:s.width,height:s.height}}),[a,s?s.width:null,s?s.height:null])}}}]);