(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{293:function(e,n,t){},302:function(e,n,t){},320:function(e,n,t){"use strict";t.r(n),t.d(n,"ChessboardPage",(function(){return an}));var a,r,o=t(0),i=t.n(o),l=t(25),c=t(1),s=t(16),u=t(3),d=(t(293),t(48)),m=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},f=function(e){var n=e.handleMove,t=e.moves,a=function(e){e.preventDefault(),n(e.currentTarget.dataset.move)};return t.map((function(e,n){return i.a.createElement("tr",{key:n,onClick:a,"data-move":e.move},i.a.createElement("td",null,e.san),i.a.createElement("td",null,e.weight))}))},v=d.a.div(a||(a=m(["\n  flex-grow: 1;\n  \n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 10rem;\n"],["\n  flex-grow: 1;\n  \n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 10rem;\n"]))),b=d.a.table(r||(r=m(["\n    width: 100%;\n    background: #262626;\n    color: #b3b3b3;\n    font-size: 1.2rem;\n    \n    thead th {\n        background: #262626;\n        font-weight: 500;\n    }\n    \n    tbody td,\n    thead th {\n        padding: .2rem .5rem;\n    }\n    \n    tbody tr {\n        background: #363636;\n        cursor: pointer;\n    }\n    \n    tbody tr:nth-child(odd) {\n        background: #4b4b4b;\n    }\n    \n    tbody tr:hover{\n        background: #7c7c7c;\n    }\n"],["\n    width: 100%;\n    background: #262626;\n    color: #b3b3b3;\n    font-size: 1.2rem;\n    \n    thead th {\n        background: #262626;\n        font-weight: 500;\n    }\n    \n    tbody td,\n    thead th {\n        padding: .2rem .5rem;\n    }\n    \n    tbody tr {\n        background: #363636;\n        cursor: pointer;\n    }\n    \n    tbody tr:nth-child(odd) {\n        background: #4b4b4b;\n    }\n    \n    tbody tr:hover{\n        background: #7c7c7c;\n    }\n"]))),h=Object(o.memo)((function(){var e=Object(l.d)((function(e){return e.openingMoves}),l.c),n=Object(l.d)((function(e){return e.fen}),l.c),t=Object(o.useCallback)((function(e){c.a.dispatch(Object(s.d)({from:e.substring(0,2),to:e.substring(2,4),id:u.d.getCounter(),fen:n}))}),[n]);return 0===e.length?null:i.a.createElement(v,null,i.a.createElement(b,null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Move"),i.a.createElement("th",null,"Weight"))),i.a.createElement("tbody",null,i.a.createElement(f,{moves:e,handleMove:t}))))})),g=t(12),p=t(79),w=new p,E=Object(o.memo)((function(e){return i.a.createElement("div",{className:"evaluation-info"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-xs ta-c"},e.name),i.a.createElement("td",{className:"fs-xs ta-c"},"Nodes: ",k(e.evaluation)),i.a.createElement("td",{className:"fs-xs ta-c"},"Time: ",x(e.evaluation)),i.a.createElement("td",{className:"fs-xs ta-c"},"Tb hits: ",N(e.evaluation[g.a.tbhits]))))))})),O=Object(o.memo)((function(e){var n=performance.now(),t=function(e,n){w.load(n);var t=_(e),a=[];if(t&&t.length>0)for(var r=0;r<t.length;r++){var o=t[r],i=w.move(o,{sloppy:!0});if(!i){console.log("Move doesn't exist",{move:o,fen:n});break}var l=""+i.san;a.push(l)}return a}(e.evaluation[g.a.pv],e.fen),a=performance.now();return console.log("EvalLine",a-n),i.a.createElement("div",{className:"d-f pb-xxs"},i.a.createElement("div",{className:"fs-sm"},M(e.evaluation)),i.a.createElement("div",{className:"pv-holder"},t.map((function(e,n){return i.a.createElement("span",{className:"pv-holder__move",key:n},e)}))))})),y=Object(o.memo)((function(e){var n=Object(l.d)((function(e){return{fen:e.fen,evaluations:e.evaluation}}),l.c),t=n.fen,a=n.evaluations;return i.a.createElement(j,{evaluations:a,fen:t,name:e.name})})),j=Object(o.memo)((function(e){var n=e.evaluations,t=e.name,a=e.fen;return i.a.createElement("div",null,n[0]&&i.a.createElement(E,{name:t,evaluation:n[0]}),i.a.createElement("div",null,n.map((function(e){return i.a.createElement(O,{fen:a,evaluation:e,key:e[g.a.pv]})}))))}));function M(e){var n=Number(e[g.a.score]);return e[g.a.mate]?"#"+Number(e[g.a.mate]):n}function k(e){return N(e[g.a.nodes])}function x(e){return e[g.a.time]?(Number(e[g.a.time])/1e3).toFixed(0)+"s":0}function N(e){if(e){var n=Number(e);return n>1e9?(n/1e9).toFixed(2)+"B":n>1e6?(n/1e6).toFixed(2)+"M":n>1e3?(n/1e3).toFixed(0)+"K":n}return 0}function _(e){return"string"!=typeof e?[]:e.split(" ")}function C(e,n){return i.a.createElement("button",{onClick:n,"data-move":e.uci,className:"btn btn-syzygy"},e.san)}var F=Object(o.memo)((function(e){if(null===e.syzygy)return null;var n=e.syzygy.moves,t=n.filter((function(e){return-1===e.wdl||-2===e.wdl})),a=n.filter((function(e){return 0===e.wdl})),r=n.filter((function(e){return 2===e.wdl||1===e.wdl}));return i.a.createElement("div",{className:"explorer-box"},i.a.createElement("div",{className:"data"},t.length>0&&i.a.createElement("div",{className:"fs-6"},"Win:",t.map((function(n){return C(n,e.handleClickMove)}))),a.length>0&&i.a.createElement("div",{className:"fs-6"},"Draw:",a.map((function(n){return C(n,e.handleClickMove)}))),r.length>0&&i.a.createElement("div",{className:"fs-6"},"Losing:",r.map((function(n){return C(n,e.handleClickMove)})))))}));var I=Object(l.b)((function(e){return{syzygy:e.syzygy||null}}),(function(e){return{handleClickMove:function(n){var t=n.currentTarget.dataset.move,a=c.a.getState().fen,r="q";t.length>4&&(r=t.substring(4,5)),e(Object(s.d)({from:t.substring(0,2),to:t.substring(2,4),id:u.d.getCounter(),promotion:r,fen:a}))}}}))(F),S=t(32),A=(t(302),function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e});var T=d.a.div(L||(L=A(["\n  flex-grow: 1;\n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 0;\n"],["\n  flex-grow: 1;\n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 0;\n"]))),z=Object(o.memo)((function(e){return i.a.createElement(T,null,i.a.createElement("table",{className:"games-database-explorer"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{colSpan:2},i.a.createElement("span",{className:"d-ib pr-sm"},"Games"),i.a.createElement(S.b,{isLoading:e.isLoading})))),i.a.createElement("tbody",null,e.response&&function(e){return e.response&&e.response.games.map((function(e,n){return i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement("span",{style:{color:"white"}},e.white," (",e.whiteElo," )"),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#f1f1f1"}},e.black," (",e.blackElo,")"),i.a.createElement("br",null),i.a.createElement("div",{className:"games-database-explorer__line"},e.fewNextMove.join(" "))),i.a.createElement("td",{className:"games-database-explorer__results"},e.result))}))}(e),!e.isLoading&&!e.response&&i.a.createElement("tr",null,i.a.createElement("td",null,"No games in database.")))))}));var L,P=Object(l.b)((function(e){return{response:e.gameDatabase.response,isLoading:e.gameDatabase.isLoading,fen:e.fen}}),(function(e){return{handleMove:function(n){var t=c.a.getState().fen;e(Object(s.d)({from:n.substring(0,2),to:n.substring(2,4),id:u.d.getCounter(),fen:t}))}}}))(z),H=t(2),B=t(23),W=t(22),D=Object(o.memo)((function(e){var n=e.fen,t=e.counter,a=n.split(/\s+/),r=a[5],o="b"===a[1],l=" move_num move_num_"+t;return o?o&&i.a.createElement("span",{key:"move_"+t,className:l,id:l},r,"."):null})),G=t(13);function U(e){var n=e.variants.map((function(n,t){return[i.a.createElement(K,{key:t,counter:e.counter-1,moves:n[u.b.moves],level:e.level+1,handleMoveClick:e.handleMoveClick,showBracket:!0,lastMoveId:e.lastMoveId})]}));return e.variants.length>1?i.a.createElement("div",null,n):n}var K=Object(o.memo)((function(e){var n=e.counter;return i.a.createElement("div",null,e.moves.map((function(t,a){if(t[u.b.fen]===G.a)return null;t[u.b.variants].length;var r="move",o=!1,l=!1;e.showBracket&&(0===a&&(o=!0),a===e.moves.length-1&&(l=!0)),n++;var c={};return t[u.b.id]===e.lastMoveId&&(c.color="#99ff98"),r+=" l-"+(e.level>1?2:e.level),i.a.createElement(i.a.Fragment,{key:a},i.a.createElement("div",{className:r,style:c,key:a,onClick:e.handleMoveClick,"data-id":t[u.b.id]},o&&"(",i.a.createElement(D,{counter:n,fen:t[u.b.fen]}),i.a.createElement("span",null,t[u.b.shortNotation]),l&&")"),i.a.createElement(U,{key:"variant_"+t[u.b.id],variants:t[u.b.variants],level:e.level,lastMoveId:e.lastMoveId,counter:n,handleMoveClick:e.handleMoveClick}))})))})),R=t(14),q=t(11),J=t(24),V=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},Q=Object(o.memo)((function(e){var n=i.a.createElement(K,{moves:e.history,counter:0,level:0,lastMoveId:e.lastMoveId,handleMoveClick:X,showBracket:!1});return i.a.createElement(Z,null,e.history.length>1&&n)})),Z=d.a.div(Y||(Y=V(["\n    font-size: 1.3rem;\n    color: white;\n    background-color: #4b4b4b;\n    padding: 0 .8rem;\n    \n    .move_num {\n        font-size: 1.1rem;\n        color: #cecece;\n    }\n    \n    .move {\n        padding: .1rem .5rem .1rem 0;\n        display: inline-block;\n    }\n    \n    .l-1{\n        font-size: 1rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    .l-2{\n        font-size: .9rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    \n    .history__subline {\n        padding-left: 1rem;\n        display: block;\n    }\n    \n    .history__subline .move{\n        font-size: 1rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    .move__active {\n        color: red;\n    }\n    \n    \n    .history__title {\n        color: white;\n        padding: .6rem;\n    }\n"],["\n    font-size: 1.3rem;\n    color: white;\n    background-color: #4b4b4b;\n    padding: 0 .8rem;\n    \n    .move_num {\n        font-size: 1.1rem;\n        color: #cecece;\n    }\n    \n    .move {\n        padding: .1rem .5rem .1rem 0;\n        display: inline-block;\n    }\n    \n    .l-1{\n        font-size: 1rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    .l-2{\n        font-size: .9rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    \n    .history__subline {\n        padding-left: 1rem;\n        display: block;\n    }\n    \n    .history__subline .move{\n        font-size: 1rem;\n        color: rgba(170, 165, 170, 0.99);\n    }\n    \n    .move__active {\n        color: red;\n    }\n    \n    \n    .history__title {\n        color: white;\n        padding: .6rem;\n    }\n"])));function X(e){e.preventDefault();var n=Number(e.currentTarget.dataset.id),t=u.d.getReference(n);if(t&&t.node){var a=t.node[u.b.fen];c.a.dispatch(Object(B.a)([Object(s.b)(t.node[u.b.id]),Object(H.w)(a),Object(H.u)([]),Object(W.a)(null),Object(R.c)([])]));var r=null,o=null,i=t.node[u.b.evaluation];i&&i[0]&&(o=i[0]);var l=u.d.getPrevMove(t.node[u.b.id]);if(l){var d=l[u.b.evaluation];d&&d[0]&&(r=d[0])}c.a.dispatch(Object(q.e)(a,t.node[u.b.move],r,o)),c.a.dispatch(Object(R.a)(a)),c.a.dispatch(Object(J.b)(a))}}var Y,$=Object(l.b)((function(e){return{history:e.history,lastMoveId:e.lastMoveId}}))(Q),ee=t(83),ne=t(117),te=t.n(ne),ae=t(105);var re={};function oe(e){var n=Object(ae.a)("multipv",e.data);re[n]=e.data}function ie(e,n){var t,a,r,i=Object(o.useState)(),l=i[0],c=i[1],s=Object(o.useState)(),u=s[0],d=s[1],m=Object(o.useState)([]),f=m[0],v=m[1],b=Object(o.useState)({threads:1,delay:1e4,hashSize:32,multiPv:3}),h=b[0];b[1];return t=function(){console.log("Time",performance.now()/1e3);var n=Object.keys(re).map((function(e){return re[e]}));console.log({values:n});var t=n.join("\n"),a=Object(ae.b)(t,e);a.length>0&&v(a)},a=3e3,r=Object(o.useRef)(null),Object(o.useEffect)((function(){r.current=t}),[t]),Object(o.useEffect)((function(){if(null!==a){var e=setInterval((function(){r.current&&r.current()}),a);return function(){return clearInterval(e)}}}),[a]),Object(o.useEffect)((function(){if(!l){try{if(!window.Worker)throw new Error("Worker is not supported");var e=new window.Worker("object"==typeof window.WebAssembly&&window.WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))?"/engines/stockfish.wasm.js":"/engines/stockfish.js");e.addEventListener("message",oe),e.postMessage("uci"),e.postMessage("isready"),e.postMessage("setoption name Hash value "+h.hashSize),e.postMessage("setoption name UCI_AnalyseMode value false"),e.postMessage("setoption name Ponder value false"),e.postMessage("setoption name multipv value "+h.multiPv),e.postMessage("setoption name Contempt value 24"),c(e)}catch(e){d(e)}}}),[oe,l,h.hashSize,h.multiPv]),Object(o.useEffect)((function(){return l&&e&&(l.postMessage("stop"),l.postMessage("position fen "+e+" moves "+n),l.postMessage("go movetime "+h.delay)),function(){l&&(l.postMessage("stop"),l.terminate(),console.log("worker terminated"))}}),[e,n,l,h]),[l,f,u]}var le,ce=Object(o.memo)((function(e){var n=Object(o.useState)({doEvaluation:!1}),t=n[0],a=n[1],r=Object(l.d)((function(e){return{lastFen:e.fen,lastMoveId:e.lastMoveId}}),l.c),c=r.lastFen,s=r.lastMoveId;return i.a.createElement("div",null,i.a.createElement("label",null,i.a.createElement(te.a,{defaultChecked:t.doEvaluation,icons:!1,onChange:function(){a({doEvaluation:!t.doEvaluation})}}),i.a.createElement("span",{className:"react-toggle--label"},"Local")),t.doEvaluation&&i.a.createElement(se,{lastMoveId:s,lastFen:c}))})),se=Object(o.memo)((function(e){var n=u.d.getMoveLine(e.lastMoveId),t=ie(e.lastFen,n),a=t[0],r=t[1];return console.log({worker:a,evaluations:r}),i.a.createElement("div",null,r&&i.a.createElement(j,{evaluations:r,fen:e.lastFen,name:"Local"}))})),ue=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},de=Object(o.memo)((function(){var e=Object(l.d)((function(e){return e.panelTab}),l.c);return i.a.createElement(i.a.Fragment,null,e===ee.a.INFO_TAB&&i.a.createElement($,null),e===ee.a.EVALUATION_TAB&&i.a.createElement("div",null,i.a.createElement(ce,null),i.a.createElement(y,{name:"Cloud"})),e===ee.a.BOOK_TAB&&i.a.createElement(me,null,i.a.createElement("div",{className:"section"},i.a.createElement(h,null),i.a.createElement(P,null),i.a.createElement(I,null))))})),me=d.a.div(le||(le=ue(["\n  width: 100%;\n  height: 100%;\n  \n  display: flex;\n  flex-direction: column;\n\n.section {\n  flex-grow: 1;\n  \n  display: flex;\n  flex-direction: column;\n  \n  /* for Firefox */\n  min-height: 0;\n}\n\n.scrollable-content {\n  background: white;\n  flex-grow: 1;\n  \n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 0;\n}\n\n"],["\n  width: 100%;\n  height: 100%;\n  \n  display: flex;\n  flex-direction: column;\n\n.section {\n  flex-grow: 1;\n  \n  display: flex;\n  flex-direction: column;\n  \n  /* for Firefox */\n  min-height: 0;\n}\n\n.scrollable-content {\n  background: white;\n  flex-grow: 1;\n  \n  overflow: auto;\n  \n  /* for Firefox */\n  min-height: 0;\n}\n\n"]))),fe=de,ve=t(81),be=t(285),he=t(317),ge=t(318),pe=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},we=t(130),Ee=Object(o.memo)((function(e){return i.a.createElement("div",{className:"d-f"},i.a.createElement(i.a.Fragment,null,ye(ee.a.INFO_TAB,be.a,e.panelTab),ye(ee.a.EVALUATION_TAB,he.a,e.panelTab),ye(ee.a.BOOK_TAB,ge.a,e.panelTab)),function(e){if(0===e.evaluation.length)return null;var n=e.evaluation[0];return i.a.createElement(je,null,i.a.createElement(Me,null,M(n),!n[g.a.mate]&&i.a.createElement("span",{className:"fs-xs fw-r"},"/",n[g.a.depth])),i.a.createElement(Me,null,"n: ",k(n)),i.a.createElement(Me,null,"t: ",x(n)))}(e))}));function Oe(e){var n=e.currentTarget.dataset.tab;c.a.dispatch(Object(ee.c)(n))}function ye(e,n,t){var a=we("btn btn-panel",{is_active:t===e});return i.a.createElement("button",{onClick:Oe,"data-tab":e,className:a},i.a.createElement(n,{color:"white",height:16,width:16}))}var je=d.a.div(ke||(ke=pe(["\n    padding: .2rem .4rem;\n"],["\n    padding: .2rem .4rem;\n"]))),Me=d.a.span(xe||(xe=pe(["\n    display: inline-block;\n    padding: 0 .5rem;\n"],["\n    display: inline-block;\n    padding: 0 .5rem;\n"])));var ke,xe,Ne=Object(l.b)((function(e){return{fen:e.fen,evaluation:e.evaluation,onMove:e.onMove,isFlip:e.isFlip,isOnline:e.isOnline,panelTab:e.panelTab,settings:e.settings}}))(Ee);function _e(e){var n={};return e.SQUARES.forEach((function(t){var a=e.moves({square:t,verbose:!0});a.length&&(n[t]=a.map((function(e){return e.to})))})),n}function Ce(e){return"w"===e.turn()?"white":"black"}var Fe=t(130);var Ie=function(e){var n,t,a=Fe("on-move-indicator pos-a",{"on-move-indicator--top":(n=e.onMove,t=e.isFlip,!(n===H.b.WHITE&&!t||Boolean(n===H.b.BLACK&&t)))});return i.a.createElement("div",{className:a})},Se=t(92),Ae=t(57);function Te(){var e=Object(o.useState)(null),n=e[0],t=e[1];return[n,Object(o.useCallback)((function(e){t(e)}),[])]}var ze=t(303);function Le(e,n){var t=n.length>4&&n.substring(4,5),a=n.substring(0,2),r=n.substring(2,4),o=new p(e);if(!o.move({from:a,to:r,promotion:t}))throw new Error("Invalid move "+n);return{fen:o.fen(),from:a,to:r,promotion:t}}var Pe=t(80),He=t.n(Pe),Be=function(){function e(){var n=this;this.storeListener=function(){var t=n.store.getState();if(t.autoplay&&!1===t.loading&&e.isAiOnMove(t)){var a=n.getOpeningMove(t.openingMoves);a?n.dispatchOpeningMove(a,t.fen):t.evaluation.length>0&&(console.log("check engine evaluation"),n.dispatchEngineMove(t.evaluation[0],t.fen))}},this.store=c.a;var t=He()(this.storeListener,300);c.a.subscribe(t)}return e.prototype.dispatchOpeningMove=function(e,n){var t=Le(n,e.move);this.store.dispatch(Object(s.d)({from:t.from,to:t.to,id:u.d.getCounter(),fen:n}))},e.prototype.isScoreHigh=function(e){var n=Number(e[g.a.time])/1e3,t=Number(e[g.a.score]),a=Math.abs(Number(e[g.a.mate]));return t>8&&n>3||(t>7&&n>4||(t>6&&n>5||(t>5&&n>7||(t>4&&n>8||(t>3&&n>10||(a>0&&a<6||(a>0&&a<11&&n>3||a>0&&a<18&&n>6)))))))},e.prototype.dispatchEngineMove=function(e,n){var t=e[g.a.import],a=e[g.a.pv],r=Number(e[g.a.nodes]);if(this.isScoreHigh(e)&&console.log("isScoreHigh",{evaluation:e}),"string"==typeof a&&(1===t||r>8e7||this.isScoreHigh(e))){var o=Le(n,_(a)[0]);this.store.dispatch(Object(s.d)({from:o.from,to:o.to,id:u.d.getCounter(),fen:n}))}},e.prototype.getOpeningMove=function(e){if(0===e.length)return null;var n=e.reduce((function(e,n){return e+n.weight}),0),t=Math.ceil(Number(n)/e.length),a=e.filter((function(e){return e.weight>=t}));return this.randomItem(a)},e.prototype.randomItem=function(e){return e[Math.floor(Math.random()*e.length)]},e.isAiOnMove=function(e){return!!(e.onMove===H.b.WHITE&&e.isFlip||e.onMove===H.b.BLACK&&!e.isFlip)},e}(),We=t(8),De=t(31),Ge=t(311),Ue=t.n(Ge);function Ke(){var e=Te(),n=e[0],t=e[1],a=Object(o.useState)(),r=a[0],i=a[1];Object(o.useEffect)((function(){if(n&&!r){var e=Object(ze.Chessground)(n,{orientation:"white",highlight:{check:!0,lastMove:!0},addPieceZIndex:!0,movable:{free:!1,dests:_e(new p)}});e.redrawAll(),e.set({movable:{events:{after:(o=e,function(e,n){c.a.dispatch(Object(s.d)({from:e,to:n,id:u.d.getCounter(),fen:o.state.fen}))})}}}),i(e),t=u.d.getStateHash(),a=Ue()((function(){var e=c.a.getState().history,n=c.a.getState().user,t=We.a.getToken();n.lastGameId&&t&&De.a.saveGame(e,n.lastGameId,t)}),1e3),c.a.subscribe((function(){var e=u.d.getStateHash();t!==e&&a(),t=e})),new Be}var t,a,o}),[r,n]);var l=Object(o.useCallback)((function(){return He()((function(){null==r||r.redrawAll()}),100)}),[r]);return Object(o.useEffect)((function(){if(r)return window.addEventListener("resize",l(),!0),function(){window.addEventListener("resize",l(),!0)}}),[r,l]),[t,r]}var Re=function(){return(Re=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},qe=function(e){e.preventDefault();var n=Re({},c.a.getState().promotionDialog.requestedParams);n.promotion=e.currentTarget.dataset.piece,c.a.dispatch(Object(Ae.b)({isOpen:!1})),c.a.dispatch(Object(s.d)(n))};var Je=["a0","a1","b1","c1","d1","e1","f1","g1","h1","a2","b2","c2","d2","e2","f2","g2","h2","a3","b3","c3","d3","e3","f3","g3","h3","a4","b4","c4","d4","e4","f4","g4","h4","a5","b5","c5","d5","e5","f5","g5","h5","a6","b6","c6","d6","e6","f6","g6","h6","a7","b7","c7","d7","e7","f7","g7","h7","a8","b8","c8","d8","e8","f8","g8","h8"];function Ve(e){return Je.includes(e)}var Qe,Ze=Object(o.memo)((function(e){var n=Object(l.d)((function(e){return{fen:e.fen,onMove:e.onMove,history:e.history,isFlip:e.isFlip,lastMoveId:e.lastMoveId,lastMove:e.lastMove,promotionDialog:e.promotionDialog,evaluation:e.evaluation}}),l.c),t=n.isFlip,a=n.fen,r=n.lastMove,s=n.evaluation,u=n.promotionDialog,d=n.onMove,m=r.from,f=r.to,v=Ke(),b=v[0],h=v[1];return Object(o.useEffect)((function(){h&&h.set({orientation:t?"black":"white"})}),[h,t]),Object(o.useEffect)((function(){if(h){var e=new p(a),n={check:e.in_check(),turnColor:Ce(e),highlight:{check:!0,lastMove:!0,selected:!0},movable:{color:Ce(e),dests:_e(e)},fen:a};m&&f&&(n.lastMove=[m,f]),h.set(n),console.log("board.redrawAll"),h.redrawAll(),function(e){var n="b"===e.turn()?"Black":"White",t="";!0===e.in_checkmate()?t="Game over, "+n+" is in checkmate.":!0===e.in_draw()?t="Game over, drawn position":!0===e.in_check()&&(t+=n+" is in check"),c.a.dispatch(Object(H.x)(t)),c.a.dispatch(Object(H.z)("b"===e.turn()?H.b.BLACK:H.b.WHITE))}(e)}}),[h,a,m,f]),Object(o.useEffect)((function(){if(h&&s.length>0){var e=s[0].p;if("string"==typeof e){var n=e.substring(0,2),t=e.substring(2,4);Ve(n)&&Ve(t)&&h.setShapes([{orig:n,dest:t,brush:"paleGreen"}])}}}),[h,s]),i.a.createElement("div",{className:"brown pos-r"},i.a.createElement(Ie,{onMove:d,isFlip:t}),i.a.createElement(Se.a,Re({},u,{onMove:d,handleOnClick:qe})),i.a.createElement("div",{id:"awesome-chessboard",className:"is2d",ref:b}))})),Xe=t(312);function Ye(){return window.innerWidth>window.innerHeight?Qe.landscape:Qe.portrait}!function(e){e.landscape="landscape",e.portrait="portrait"}(Qe||(Qe={}));var $e,en,nn=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e},tn=d.a.div($e||($e=nn(["\n    flex: 50%;\n"],["\n    flex: 50%;\n"]))),an=Object(o.memo)((function(){var e=Te(),n=(e[0],e[1]),t=Te(),a=(t[0],t[1],function(){var e=Object(o.useState)(Ye()),n=e[0],t=e[1],a=function(e){t(Ye())};return Object(o.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[]),n}());console.log("orientation",a);var r=window.innerWidth>window.innerHeight,l=Object(Xe.a)(),c=l.ref,s=l.width,u=void 0===s?1:s,d=l.height,m=void 0===d?1:d;return console.log("window.innerHeight",window.innerHeight),console.log({width:u,height:m}),"landscape"===a?i.a.createElement("div",{ref:n,className:"d-f"},i.a.createElement(tn,null,i.a.createElement(Ze,null)),i.a.createElement(tn,null,i.a.createElement(Ne,null),i.a.createElement(fe,null),i.a.createElement(ve.a,{showMainMenu:!0,showFlip:!0,showUndo:!0,showRedo:!0,showAutoplay:!0}))):i.a.createElement(rn,{ref:n,chessboardHeight:r?window.innerHeight:window.innerWidth,appHeight:window.innerHeight},i.a.createElement(Ze,null),i.a.createElement(Ne,null),i.a.createElement("div",{ref:c,style:{overflow:"hidden"}},i.a.createElement("div",{style:{height:m}},i.a.createElement(fe,null))),i.a.createElement(ve.a,{showMainMenu:!0,showFlip:!0,showUndo:!0,showRedo:!0,showAutoplay:!0}))})),rn=(n.default=an,d.a.div(en||(en=nn(["\n    height: ",";\n    display: grid;\n    grid-template-rows: "," 23px auto 30px;\n"],["\n    height: ",";\n    display: grid;\n    grid-template-rows: "," 23px auto 30px;\n"])),(function(e){return e.appHeight+"px"}),(function(e){return e.chessboardHeight+"px"})))}}]);